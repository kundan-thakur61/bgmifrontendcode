module.exports=[70515,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(29338),g=a.i(536),h=a.i(21351),i=a.i(6327),j=a.i(83915);function k({matchId:a,tournamentId:d}){let{user:e,isAuthenticated:h}=(0,f.useAuth)(),[i,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),r=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(!h)return;let b=(0,j.io)("http://localhost:5000/api",{withCredentials:!0});return q(b),(async()=>{try{let b;a?b=await (0,g.getMatchMessages)(a):d&&(b=await (0,g.getTournamentMessages)(d)),k(b.data||[])}catch(a){console.error("Failed to fetch messages:",a)}finally{o(!1)}})(),a?b.emit("join_match",a):d&&b.emit("join_tournament",d),b.on("new_message",a=>{k(b=>[...b,a])}),()=>{a?b.emit("leave_match",a):d&&b.emit("leave_tournament",d),b.disconnect()}},[a,d,h]),(0,c.useEffect)(()=>{s()},[i]);let s=()=>{r.current?.scrollIntoView({behavior:"smooth"})},t=async b=>{if(b.preventDefault(),l.trim()&&h)try{await (0,g.sendMessage)(a,d,l),m("")}catch(a){console.error("Failed to send message:",a)}};return h?(0,b.jsxs)("div",{className:"flex flex-col h-full bg-gray-800 rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",children:n?(0,b.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,b.jsx)("div",{className:"w-6 h-6 border-2 border-gray-500 border-t-transparent rounded-full animate-spin"})}):0===i.length?(0,b.jsx)("div",{className:"text-center text-gray-400",children:(0,b.jsx)("p",{children:"No messages yet. Start the conversation!"})}):(0,b.jsxs)("div",{className:"space-y-4",children:[i.map(a=>(0,b.jsx)("div",{className:`flex ${a.sender._id===e._id?"justify-end":"justify-start"}`,children:(0,b.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${a.sender._id===e._id?"bg-primary-600 text-white":"bg-gray-700 text-gray-200"}`,children:[(0,b.jsxs)("div",{className:"flex items-center mb-1",children:[(0,b.jsx)("span",{className:"font-semibold text-sm mr-2",children:a.sender.username}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:new Date(a.createdAt).toLocaleTimeString()})]}),(0,b.jsx)("p",{className:"text-sm",children:a.content})]})},a._id)),(0,b.jsx)("div",{ref:r})]})}),(0,b.jsx)("form",{onSubmit:t,className:"p-4 border-t border-gray-700",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Send"})]})})]}):(0,b.jsx)("div",{className:"p-4 bg-gray-800 rounded-lg",children:(0,b.jsx)("p",{className:"text-gray-400",children:"Please log in to use chat."})})}a.i(51476);var l=a.i(83191);function m(){let a=(0,d.useParams)(),j=(0,d.useRouter)(),{user:m,isAuthenticated:n}=(0,f.useAuth)(),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)({teamName:"",members:[]}),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)({}),[E,F]=(0,c.useState)("");(0,c.useEffect)(()=>{G()},[a.id]);let G=async()=>{try{let b=await g.api.getTournament(a.id);p(b.tournament),r(b.userRegistered||!1),b.userRegistered&&b.tournament.matches?.length>0&&H(b.tournament.matches)}catch(a){x("Tournament not found")}finally{t(!1)}},H=async a=>{let b={};for(let c of a)try{let a=await g.api.getRoomCredentials(c._id);a?.roomId&&(b[c._id]=a)}catch(a){}D(b)},I=(a,b)=>{navigator.clipboard.writeText(a),F(b),setTimeout(()=>F(""),2e3)},J=async b=>{if(b.preventDefault(),!n)return void j.push("/login");v(!0);try{await g.api.registerForTournament(a.id,y),B(!1),G()}catch(a){x(a.message)}finally{v(!1)}},K=a=>{let b={upcoming:"bg-blue-500/20 text-blue-400",registration_open:"bg-green-500/20 text-green-400",registration_closed:"bg-yellow-500/20 text-yellow-400",ongoing:"bg-gaming-purple/20 text-gaming-purple animate-pulse",completed:"bg-dark-600 text-dark-300",cancelled:"bg-red-500/20 text-red-400"};return b[a]||b.upcoming};if(s)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.default,{}),(0,b.jsx)("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})})]});if(w&&!o)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.default,{}),(0,b.jsx)("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-red-400 mb-4",children:w}),(0,b.jsx)(e.default,{href:"/tournaments",className:"btn-primary",children:"Back to Tournaments"})]})})]});let L=o.maxTeams-(o.registeredTeams||0)<=0;return(0,b.jsxs)(b.Fragment,{children:[o&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.TournamentSchema,{tournament:o}),(0,b.jsx)(l.BreadcrumbSchema,{items:[{name:"Home",url:"https://battlezone.com"},{name:"Tournaments",url:"https://battlezone.com/tournaments"},{name:o.title||o.name,url:`https://battlezone.com/tournaments/${a.id}`}]})]}),(0,b.jsx)(h.default,{}),(0,b.jsx)("main",{className:"min-h-screen bg-dark-900 py-8",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-4xl",children:[(0,b.jsxs)(e.default,{href:"/tournaments",className:"inline-flex items-center text-dark-400 hover:text-white mb-6",children:[(0,b.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Tournaments"]}),(0,b.jsxs)("div",{className:"card p-6 mb-6",children:[o.banner?.url&&(0,b.jsx)("img",{src:o.banner.url,alt:o.title,className:"w-full h-48 object-cover rounded-lg mb-4"}),(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium mb-2 ${K(o.status)}`,children:o.status.replace("_"," ").toUpperCase()}),(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:o.title})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-3xl font-bold text-gaming-green",children:["â‚¹",o.prizePool]}),(0,b.jsx)("div",{className:"text-dark-400 text-sm",children:"Total Prize Pool"})]})]}),(0,b.jsx)("p",{className:"text-dark-300 mb-6",children:o.description}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-dark-700/50 rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-dark-400 text-sm",children:"Entry Fee"}),(0,b.jsx)("div",{className:"text-xl font-bold",children:0===o.entryFee?"FREE":`â‚¹${o.entryFee}`})]}),(0,b.jsxs)("div",{className:"bg-dark-700/50 rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-dark-400 text-sm",children:"Format"}),(0,b.jsx)("div",{className:"text-xl font-bold capitalize",children:o.format})]}),(0,b.jsxs)("div",{className:"bg-dark-700/50 rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-dark-400 text-sm",children:"Teams"}),(0,b.jsxs)("div",{className:"text-xl font-bold",children:[o.registeredTeams||0,"/",o.maxTeams]})]}),(0,b.jsxs)("div",{className:"bg-dark-700/50 rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-dark-400 text-sm",children:"Mode"}),(0,b.jsx)("div",{className:"text-xl font-bold capitalize",children:o.mode})]})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,b.jsxs)("div",{className:"card p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Tournament Schedule"}),(0,b.jsxs)("dl",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("dt",{className:"text-dark-400",children:"Registration Opens"}),(0,b.jsx)("dd",{className:"font-medium",children:new Date(o.registrationStartAt).toLocaleDateString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("dt",{className:"text-dark-400",children:"Registration Closes"}),(0,b.jsx)("dd",{className:"font-medium",children:new Date(o.registrationEndAt).toLocaleDateString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("dt",{className:"text-dark-400",children:"Tournament Starts"}),(0,b.jsx)("dd",{className:"font-medium",children:new Date(o.startAt).toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("dt",{className:"text-dark-400",children:"Tournament Ends"}),(0,b.jsx)("dd",{className:"font-medium",children:new Date(o.endAt).toLocaleDateString()})]})]})]}),(0,b.jsxs)("div",{className:"card p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Prize Distribution"}),(0,b.jsx)("div",{className:"space-y-2",children:o.prizeDistribution?.map((a,c)=>(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("span",{className:"text-dark-400",children:[0===c?"ðŸ†":1===c?"ðŸ¥ˆ":2===c?"ðŸ¥‰":`#${c+1}`," ",a.position]}),(0,b.jsxs)("span",{className:"font-bold text-gaming-green",children:["â‚¹",a.prize]})]},c))||(0,b.jsx)("p",{className:"text-dark-400",children:"Prize details coming soon"})})]})]}),o.rules?.length>0&&(0,b.jsxs)("div",{className:"card p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Rules & Regulations"}),(0,b.jsx)("ul",{className:"space-y-2 text-dark-300",children:o.rules.map((a,c)=>(0,b.jsxs)("li",{className:"flex gap-2",children:[(0,b.jsxs)("span",{className:"text-primary-400",children:[c+1,"."]}),(0,b.jsx)("span",{children:a})]},c))})]}),o.matches?.length>0&&(0,b.jsxs)("div",{className:"card p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Match Schedule"}),(0,b.jsx)("div",{className:"space-y-4",children:o.matches.map((a,c)=>(0,b.jsxs)("div",{className:"bg-dark-700/50 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"text-dark-400 text-sm",children:["Match ",c+1]}),(0,b.jsx)("div",{className:"font-medium",children:a.title})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-sm text-dark-400",children:new Date(a.scheduledAt).toLocaleString()}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${K(a.status)}`,children:a.status})]})]}),q&&C[a._id]&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-dark-600",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,b.jsx)("span",{className:"text-gaming-green text-sm font-medium",children:"ðŸŽ® Room Credentials"})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"bg-dark-800 rounded p-3",children:[(0,b.jsx)("div",{className:"text-dark-400 text-xs mb-1",children:"Room ID"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"font-mono font-bold",children:C[a._id].roomId}),(0,b.jsx)("button",{onClick:()=>I(C[a._id].roomId,`room-${a._id}`),className:"text-xs text-dark-400 hover:text-white",children:E===`room-${a._id}`?"âœ“":"ðŸ“‹"})]})]}),(0,b.jsxs)("div",{className:"bg-dark-800 rounded p-3",children:[(0,b.jsx)("div",{className:"text-dark-400 text-xs mb-1",children:"Password"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"font-mono font-bold",children:C[a._id].password}),(0,b.jsx)("button",{onClick:()=>I(C[a._id].password,`pass-${a._id}`),className:"text-xs text-dark-400 hover:text-white",children:E===`pass-${a._id}`?"âœ“":"ðŸ“‹"})]})]})]})]}),q&&!C[a._id]&&"upcoming"===a.status&&(0,b.jsx)("div",{className:"mt-3 pt-3 border-t border-dark-600",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-yellow-500 text-sm",children:[(0,b.jsx)("span",{children:"â³"}),(0,b.jsx)("span",{children:"Room credentials will be shared before the match"})]})}),(0,b.jsx)(e.default,{href:`/matches/${a._id}`,className:"block mt-3 text-primary-400 text-sm hover:underline",children:"View Match Details â†’"})]},a._id))})]}),(0,b.jsxs)("div",{className:"card p-6",children:[w&&(0,b.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg mb-4",children:w}),"registration_open"===o.status&&(0,b.jsx)(b.Fragment,{children:q?(0,b.jsx)("div",{className:"text-center text-gaming-green font-medium py-4",children:"âœ“ You are registered for this tournament"}):(0,b.jsx)("button",{onClick:()=>B(!0),disabled:L,className:"btn-primary w-full py-3 text-lg",children:L?"Registration Full":`Register Now - â‚¹${o.entryFee||"FREE"}`})}),"ongoing"===o.status&&(0,b.jsx)("div",{className:"text-center py-4",children:(0,b.jsx)("div",{className:"text-gaming-purple text-xl font-bold animate-pulse",children:"Tournament in Progress!"})}),"completed"===o.status&&(0,b.jsx)("div",{className:"text-center py-4 text-dark-400",children:"This tournament has ended"})]}),q&&(0,b.jsxs)("div",{className:"card p-0 mb-6 overflow-hidden h-[500px] flex flex-col",children:[(0,b.jsx)("div",{className:"p-4 border-b border-dark-700 bg-dark-800",children:(0,b.jsx)("h3",{className:"font-bold text-white flex items-center gap-2",children:"ðŸ’¬ Tournament Chat"})}),(0,b.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,b.jsx)(k,{tournamentId:a.id})})]})]})}),A&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"card p-6 w-full max-w-md",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Register for Tournament"}),(0,b.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Team Name"}),(0,b.jsx)("input",{type:"text",value:y.teamName,onChange:a=>z({...y,teamName:a.target.value}),className:"input",placeholder:"Enter team name",required:!0})]}),(0,b.jsxs)("p",{className:"text-dark-400 text-sm",children:["Entry fee of â‚¹",o.entryFee," will be deducted from your wallet."]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>B(!1),className:"btn-secondary flex-1",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:u,className:"btn-primary flex-1",children:u?"Registering...":"Confirm Registration"})]})]})]})}),(0,b.jsx)(i.default,{})]})}a.s(["default",()=>m],70515)}];

//# sourceMappingURL=src_app_tournaments_%5Bid%5D_page_jsx_27f5c1cc._.js.map