module.exports=[39795,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(29338),f=a.i(536),g=a.i(21351),h=a.i(6327);function i(){let a=(0,d.useRouter)(),{user:i,isAuthenticated:j,loading:k}=(0,e.useAuth)(),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)({name:"",dateOfBirth:"",documentType:"aadhaar",documentNumber:"",address:{line1:"",line2:"",city:"",state:"",pincode:""}}),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null);(0,c.useEffect)(()=>{k||j||a.push("/login")},[k,j,a]),(0,c.useEffect)(()=>{j&&D()},[j]);let D=async()=>{try{let a=await f.api.getKYCStatus();m(a.kyc),(a.kyc?.status==="pending"||a.kyc?.status==="approved")&&a.kyc.name&&w(b=>({...b,name:a.kyc.name}))}catch(a){}finally{o(!1)}},E=async a=>{a.preventDefault(),s(""),u(""),q(!0);try{let a=new FormData;a.append("fullName",v.name),a.append("dateOfBirth",v.dateOfBirth),a.append("documentType",v.documentType),a.append("documentNumber",v.documentNumber),a.append("address",JSON.stringify(v.address)),x&&a.append("documentFront",x),z&&a.append("documentBack",z),B&&a.append("selfie",B),await f.api.submitKYC(a),u("KYC submitted successfully! We will verify your documents within 24-48 hours."),D()}catch(a){s(a.message||"Failed to submit KYC")}finally{q(!1)}};return k||n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("main",{className:"min-h-screen bg-dark-900 py-8",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-2xl",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"KYC Verification"}),(0,b.jsx)("p",{className:"text-dark-400 mb-6",children:"Complete KYC to enable withdrawals"}),l&&(0,b.jsx)("div",{className:`card p-4 mb-6 ${"approved"===l.status?"border border-green-500/30 bg-green-500/10":"pending"===l.status?"border border-yellow-500/30 bg-yellow-500/10":"rejected"===l.status?"border border-red-500/30 bg-red-500/10":"border border-dark-600"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-2xl",children:"approved"===l.status?"âœ…":"pending"===l.status?"â³":"rejected"===l.status?"âŒ":"ðŸ“‹"}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-medium capitalize",children:["KYC ",l.status]}),(0,b.jsxs)("p",{className:"text-sm text-dark-400",children:["approved"===l.status&&"Your KYC has been verified. You can now make withdrawals.","pending"===l.status&&"Your KYC is under review. This usually takes 24-48 hours.","rejected"===l.status&&`Reason: ${l.rejectionReason||"Documents not clear"}`]})]})]})}),l?.status!=="approved"&&(0,b.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[r&&(0,b.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg",children:r}),t&&(0,b.jsx)("div",{className:"bg-green-500/10 border border-green-500/20 text-green-400 px-4 py-3 rounded-lg",children:t}),(0,b.jsxs)("div",{className:"card p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Personal Details"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Full Name (as on document)"}),(0,b.jsx)("input",{type:"text",value:v.name,onChange:a=>w({...v,name:a.target.value}),className:"input",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Date of Birth"}),(0,b.jsx)("input",{type:"date",value:v.dateOfBirth,onChange:a=>w({...v,dateOfBirth:a.target.value}),className:"input",required:!0})]})]})]}),(0,b.jsxs)("div",{className:"card p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Document Details"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Document Type"}),(0,b.jsx)("select",{value:v.documentType,onChange:a=>w({...v,documentType:a.target.value}),className:"input",children:[{value:"aadhaar",label:"Aadhaar Card"},{value:"pan",label:"PAN Card"},{value:"voter_id",label:"Voter ID"},{value:"driving_license",label:"Driving License"},{value:"passport",label:"Passport"}].map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Document Number"}),(0,b.jsx)("input",{type:"text",value:v.documentNumber,onChange:a=>w({...v,documentNumber:a.target.value.toUpperCase()}),className:"input",placeholder:"aadhaar"===v.documentType?"1234 5678 9012":"ABCDE1234F",required:!0})]})]})]}),(0,b.jsxs)("div",{className:"card p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Address"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Address Line 1"}),(0,b.jsx)("input",{type:"text",value:v.address.line1,onChange:a=>w({...v,address:{...v.address,line1:a.target.value}}),className:"input",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Address Line 2 (Optional)"}),(0,b.jsx)("input",{type:"text",value:v.address.line2,onChange:a=>w({...v,address:{...v.address,line2:a.target.value}}),className:"input"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"City"}),(0,b.jsx)("input",{type:"text",value:v.address.city,onChange:a=>w({...v,address:{...v.address,city:a.target.value}}),className:"input",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"State"}),(0,b.jsxs)("select",{value:v.address.state,onChange:a=>w({...v,address:{...v.address,state:a.target.value}}),className:"input",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Select State"}),["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Delhi","Jammu & Kashmir","Ladakh"].map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Pincode"}),(0,b.jsx)("input",{type:"text",value:v.address.pincode,onChange:a=>w({...v,address:{...v.address,pincode:a.target.value.replace(/\D/g,"").slice(0,6)}}),className:"input",maxLength:6,required:!0})]})]})]})]}),(0,b.jsxs)("div",{className:"card p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Upload Documents"}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Document Front"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>y(a.target.files[0]),className:"input text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Document Back"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>A(a.target.files[0]),className:"input text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Selfie with Document"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>C(a.target.files[0]),className:"input text-sm"})]})]}),(0,b.jsx)("p",{className:"text-dark-500 text-xs mt-2",children:"Accepted formats: JPG, PNG. Max size: 5MB each."})]}),(0,b.jsx)("button",{type:"submit",disabled:p,className:"btn-primary w-full py-3",children:p?"Submitting...":"Submit KYC"})]})]})}),(0,b.jsx)(h.default,{})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=src_app_kyc_page_jsx_956c3149._.js.map