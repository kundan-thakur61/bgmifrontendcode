module.exports=[73685,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(29338),f=a.i(536),g=a.i(21351),h=a.i(6327);function i(){let a=(0,d.useRouter)(),{isAuthenticated:i,loading:j}=(0,e.useAuth)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)({subject:"",category:"technical",message:""});(0,c.useEffect)(()=>{j||i||a.push("/login")},[j,i,a]),(0,c.useEffect)(()=>{i&&A()},[i]);let A=async()=>{try{let a=await f.api.getTickets();l(a.tickets||[])}catch(a){console.error("Failed to fetch tickets")}finally{n(!1)}},B=async a=>{a.preventDefault(),t(""),r(!0);try{await f.api.createTicket(y),p(!1),z({subject:"",category:"technical",message:""}),A()}catch(a){t(a.message||"Failed to create ticket")}finally{r(!1)}},C=async a=>{if(a.preventDefault(),w.trim())try{await f.api.replyToTicket(u._id,w),x("");let a=await f.api.getTicket(u._id);v(a.ticket),A()}catch(a){t(a.message)}},D=a=>{let b={open:"bg-blue-500/20 text-blue-400",in_progress:"bg-yellow-500/20 text-yellow-400",resolved:"bg-green-500/20 text-green-400",closed:"bg-dark-600 text-dark-400"};return b[a]||b.open};return j||m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("main",{className:"min-h-screen bg-dark-900 py-8",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-4xl",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Support Tickets"}),(0,b.jsx)("p",{className:"text-dark-400 text-sm",children:"Get help from our support team"})]}),(0,b.jsx)("button",{onClick:()=>p(!0),className:"btn-primary",children:"New Ticket"})]}),0===k.length?(0,b.jsxs)("div",{className:"card p-12 text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸŽ«"}),(0,b.jsx)("h2",{className:"text-xl font-bold mb-2",children:"No tickets yet"}),(0,b.jsx)("p",{className:"text-dark-400 mb-4",children:"Create a ticket if you need help"}),(0,b.jsx)("button",{onClick:()=>p(!0),className:"btn-primary",children:"Create Ticket"})]}):(0,b.jsx)("div",{className:"space-y-3",children:k.map(a=>{var c;let d;return(0,b.jsx)("div",{onClick:()=>v(a),className:"card p-4 cursor-pointer hover:bg-dark-700 transition-colors",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${D(a.status)}`,children:a.status.replace("_"," ")}),(0,b.jsx)("span",{className:`text-xs ${(c=a.priority,(d={low:"text-dark-400",normal:"text-blue-400",high:"text-orange-400",urgent:"text-red-400"})[c]||d.normal)}`,children:a.priority})]}),(0,b.jsx)("h3",{className:"font-medium",children:a.subject}),(0,b.jsx)("p",{className:"text-dark-400 text-sm mt-1 line-clamp-1",children:a.message})]}),(0,b.jsxs)("div",{className:"text-right text-xs text-dark-500",children:[(0,b.jsx)("div",{children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)("div",{className:"capitalize",children:a.category})]})]})},a._id)})})]})}),o&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"card p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Create New Ticket"}),s&&(0,b.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg mb-4",children:s}),(0,b.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Category"}),(0,b.jsx)("select",{value:y.category,onChange:a=>z({...y,category:a.target.value}),className:"input",children:[{value:"payment",label:"Payment Issue"},{value:"withdrawal",label:"Withdrawal Issue"},{value:"match",label:"Match Related"},{value:"tournament",label:"Tournament Related"},{value:"account",label:"Account Issue"},{value:"technical",label:"Technical Issue"},{value:"report_user",label:"Report User"},{value:"other",label:"Other"}].map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Subject"}),(0,b.jsx)("input",{type:"text",value:y.subject,onChange:a=>z({...y,subject:a.target.value}),className:"input",placeholder:"Brief description of your issue",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Message"}),(0,b.jsx)("textarea",{value:y.message,onChange:a=>z({...y,message:a.target.value}),className:"input min-h-[120px]",placeholder:"Describe your issue in detail...",required:!0})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>p(!1),className:"btn-secondary flex-1",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:q,className:"btn-primary flex-1",children:q?"Submitting...":"Submit Ticket"})]})]})]})}),u&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"card p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${D(u.status)}`,children:u.status.replace("_"," ")}),(0,b.jsx)("span",{className:"text-xs text-dark-400 capitalize",children:u.category})]}),(0,b.jsx)("h2",{className:"text-xl font-bold",children:u.subject})]}),(0,b.jsx)("button",{onClick:()=>v(null),className:"text-dark-400 hover:text-white",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"space-y-4 mb-4 max-h-[40vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"bg-dark-700/50 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsx)("span",{className:"font-medium",children:"You"}),(0,b.jsx)("span",{className:"text-xs text-dark-500",children:new Date(u.createdAt).toLocaleString()})]}),(0,b.jsx)("p",{className:"text-dark-300",children:u.message})]}),u.replies?.map((a,c)=>(0,b.jsxs)("div",{className:`rounded-lg p-4 ${a.isAdmin?"bg-primary-500/10 border border-primary-500/20":"bg-dark-700/50"}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsx)("span",{className:"font-medium",children:a.isAdmin?"ðŸ›¡ï¸ Support Team":"You"}),(0,b.jsx)("span",{className:"text-xs text-dark-500",children:new Date(a.createdAt).toLocaleString()})]}),(0,b.jsx)("p",{className:"text-dark-300",children:a.message})]},c))]}),"closed"!==u.status&&(0,b.jsxs)("form",{onSubmit:C,className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),className:"input flex-1",placeholder:"Type your reply..."}),(0,b.jsx)("button",{type:"submit",className:"btn-primary",children:"Send"})]}),"closed"===u.status&&(0,b.jsx)("div",{className:"text-center text-dark-400 py-4",children:"This ticket is closed"})]})}),(0,b.jsx)(h.default,{})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=src_app_tickets_page_jsx_3e03e37f._.js.map