module.exports=[92975,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(29338),f=a.i(536),g=a.i(21351),h=a.i(6327);function i(){let a=(0,d.useRouter)(),{isAuthenticated:i,loading:j}=(0,e.useAuth)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)("all");(0,c.useEffect)(()=>{j||i||a.push("/login")},[j,i,a]),(0,c.useEffect)(()=>{i&&q()},[i]);let q=async()=>{try{let a=await f.api.getNotifications();l(a.notifications||[])}catch(a){console.error("Failed to fetch notifications")}finally{n(!1)}},r=async a=>{try{await f.api.markNotificationRead(a),l(k.map(b=>b._id===a?{...b,read:!0}:b))}catch(a){console.error("Failed to mark as read")}},s=async()=>{try{await f.api.markAllNotificationsRead(),l(k.map(a=>({...a,read:!0})))}catch(a){console.error("Failed to mark all as read")}},t="unread"===o?k.filter(a=>!a.read):k,u=k.filter(a=>!a.read).length;return!j&&(i||m)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("main",{className:"min-h-screen bg-dark-900 py-8",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-2xl",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Notifications"}),u>0&&(0,b.jsxs)("p",{className:"text-dark-400 text-sm",children:[u," unread"]})]}),u>0&&(0,b.jsx)("button",{onClick:s,className:"btn-secondary text-sm",children:"Mark all as read"})]}),(0,b.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,b.jsx)("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded-lg text-sm ${"all"===o?"bg-primary-600 text-white":"bg-dark-700 text-dark-300"}`,children:"All"}),(0,b.jsxs)("button",{onClick:()=>p("unread"),className:`px-4 py-2 rounded-lg text-sm ${"unread"===o?"bg-primary-600 text-white":"bg-dark-700 text-dark-300"}`,children:["Unread (",u,")"]})]}),m?(0,b.jsx)("div",{className:"flex justify-center py-12",children:(0,b.jsx)("div",{className:"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})}):0===t.length?(0,b.jsxs)("div",{className:"card p-12 text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ””"}),(0,b.jsx)("h2",{className:"text-xl font-bold mb-2",children:"No notifications"}),(0,b.jsx)("p",{className:"text-dark-400",children:"unread"===o?"You have no unread notifications":"You have no notifications yet"})]}):(0,b.jsx)("div",{className:"space-y-3",children:t.map(a=>{var c;let d;return(0,b.jsx)("div",{onClick:()=>!a.read&&r(a._id),className:`card p-4 cursor-pointer transition-colors ${a.read?"bg-dark-800":"bg-dark-700 border-l-4 border-primary-500"}`,children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"text-2xl",children:(c=a.type,(d={match_joined:"ðŸŽ®",match_started:"ðŸš€",match_completed:"ðŸ†",match_cancelled:"âŒ",payment_received:"ðŸ’°",withdrawal_completed:"ðŸ’¸",withdrawal_failed:"âš ï¸",referral_bonus:"ðŸŽ",kyc_approved:"âœ…",kyc_rejected:"âŒ",announcement:"ðŸ“¢",default:"ðŸ””"})[c]||d.default)}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("h3",{className:`font-medium ${a.read?"text-dark-300":"text-white"}`,children:a.title}),(0,b.jsx)("span",{className:"text-dark-500 text-xs",children:new Date(a.createdAt).toLocaleDateString()})]}),(0,b.jsx)("p",{className:"text-dark-400 text-sm mt-1",children:a.message}),a.link&&(0,b.jsx)("a",{href:a.link,className:"text-primary-400 text-sm mt-2 inline-block hover:underline",children:"View details â†’"})]})]})},a._id)})})]})}),(0,b.jsx)(h.default,{})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.default,{}),(0,b.jsx)("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=src_app_notifications_page_jsx_bac01842._.js.map